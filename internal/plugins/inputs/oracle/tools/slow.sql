
---------------------------------------------------
-- slow query
---------------------------------------------------
SELECT 
	sa.ACTION,
	sa.ACTION_HASH,
	sa.APPLICATION_WAIT_TIME,
	sa.BUFFER_GETS,
	sa.CHILD_LATCH,
	sa.CLUSTER_WAIT_TIME,
	sa.COMMAND_TYPE,
	sa.CONCURRENCY_WAIT_TIME,
	sa.CPU_TIME,
	sa.DIRECT_WRITES,
	sa.DISK_READS,
	sa.ELAPSED_TIME,
	sa.ELAPSED_TIME/sa.EXECUTIONS AVG_ELAPSED,
	sa.END_OF_FETCH_COUNT,
	sa.EXACT_MATCHING_SIGNATURE,
	sa.EXECUTIONS,
	sa.FETCHES,
	sa.FIRST_LOAD_TIME,
	sa.FORCE_MATCHING_SIGNATURE,
	sa.HASH_VALUE,
	sa.INVALIDATIONS,
	sa.IO_CELL_OFFLOAD_ELIGIBLE_BYTES,
	sa.IO_CELL_OFFLOAD_RETURNED_BYTES,
	sa.IO_CELL_UNCOMPRESSED_BYTES,
	sa.IO_INTERCONNECT_BYTES,
	sa.IS_BIND_AWARE,
	sa.IS_BIND_SENSITIVE,
	sa.IS_OBSOLETE,
	sa.JAVA_EXEC_TIME,
	sa.KEPT_VERSIONS,
	sa.LAST_ACTIVE_TIME,
	sa.LAST_LOAD_TIME,
	sa.LITERAL_HASH_VALUE,
	sa.LOADED_VERSIONS,
	sa.LOADS,
	sa.LOCKED_TOTAL,
	sa.MODULE,
	sa.MODULE_HASH,
	sa.OBJECT_STATUS,
	sa.OLD_HASH_VALUE,
	sa.OPEN_VERSIONS,
	sa.OPTIMIZED_PHY_READ_REQUESTS,
	sa.OPTIMIZER_COST,
	sa.OPTIMIZER_MODE,
	sa.OUTLINE_CATEGORY,
	sa.OUTLINE_SID,
	sa.PARSE_CALLS,
	sa.PARSING_SCHEMA_ID,
	sa.PARSING_SCHEMA_NAME,
	sa.PARSING_USER_ID,
	sa.PERSISTENT_MEM,
	sa.PHYSICAL_READ_BYTES,
	sa.PHYSICAL_READ_REQUESTS,
	sa.PHYSICAL_WRITE_BYTES,
	sa.PHYSICAL_WRITE_REQUESTS,
	sa.PINNED_TOTAL,
	sa.PLAN_HASH_VALUE,
	sa.PLSQL_EXEC_TIME,
	sa.PROGRAM_ID,
	sa.PROGRAM_LINE#,
	sa.PX_SERVERS_EXECUTIONS,
	sa.REMOTE,
	sa.ROWS_PROCESSED,
	sa.RUNTIME_MEM,
	sa.SERIALIZABLE_ABORTS,
	sa.SHARABLE_MEM,
	sa.SORTS,
	sa.SQL_FULLTEXT,
	sa.SQL_ID,
	sa.SQL_PATCH,
	sa.SQL_PLAN_BASELINE,
	sa.SQL_PROFILE,
	sa.TYPECHECK_MEM,
	sa.USERS_EXECUTING,
	sa.USERS_OPENING,
	sa.USER_IO_WAIT_TIME,
	sa.VERSION_COUNT,
	to_char(sa.LAST_ACTIVE_TIME, 'yyyy-mm-dd hh24:mi:ss') LAST_ACTIVE_TIME_STR,
	u.USERNAME
FROM V$SQLAREA sa
LEFT JOIN ALL_USERS u
ON sa.PARSING_USER_ID = u.USER_ID
WHERE
	EXECUTIONS > 0 
	AND sa.ELAPSED_TIME/sa.EXECUTIONS > 10000
