# /conf/sentinel-1-tls.conf
# Redis Sentinel 1 - TLS 配置

# 网络配置
bind 192.168.139.162
# 禁用非 TLS 端口
port 0
tls-port 26379

# 监控配置
# 监控名为 "mymaster" 的主节点
# 地址: 192.168.139.162:6379
# 仲裁数: 2 (至少 2 个 Sentinel 同意才进行故障转移)
sentinel monitor mymaster 192.168.139.162 6379 2

# 主节点下线判定时间（毫秒）
sentinel down-after-milliseconds mymaster 5000

# 故障转移期间，一次只能有多少个从库在同步新主库
sentinel parallel-syncs mymaster 1

# 故障转移超时时间（毫秒）
sentinel failover-timeout mymaster 60000

# 主节点认证密码
sentinel auth-pass mymaster abc123456

# Sentinel 自身的密码
requirepass 123456abc

# ====== TLS 配置 ======
# CA 证书
tls-ca-cert-file /tls/ca-cert.pem

# Sentinel 证书和私钥
tls-cert-file /tls/redis-server-cert.pem
tls-key-file /tls/redis-server-key.pem

# 客户端认证模式
tls-auth-clients no

# 与 Redis 实例通信使用 TLS
tls-replication yes

# 支持的 TLS 协议版本
tls-protocols "TLSv1.2 TLSv1.3"

# 优先使用服务器端的密码套件
tls-prefer-server-ciphers yes

# TLS 会话缓存
tls-session-caching yes
tls-session-cache-size 20480
tls-session-cache-timeout 300

