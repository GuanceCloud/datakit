{
  "dashboardBindSet": [],
  "dashboardExtend": {},
  "dashboardMapping": [],
  "dashboardOwnerType": "node",
  "dashboardType": "CUSTOM",
  "iconSet": {
    "icon": "https://static-res.guance.com/dataflux-template/dashboard/kubernetes_by_pods/icon.svg",
    "url": "https://static-res.guance.com/dataflux-template/dashboard/kubernetes_by_pods/kubernetes_by_pods.png"
  },
  "main": {
    "charts": [
      {
        "extend": {
          "fixedTime": "",
          "isRefresh": false,
          "settings": {
            "alias": [],
            "chartType": "areaLine",
            "colors": [
              {
                "color": "#5F67D6",
                "key": "",
                "name": ""
              }
            ],
            "compareColors": {
              "dayCompare": "rgba(11,11,12,0.5)",
              "hourCompare": "#0B0B0C",
              "monthCompare": "rgba(11,11,12,0.12)",
              "weekCompare": "rgba(11,11,12,0.3)"
            },
            "compareColorsDark": {
              "dayCompare": "rgba(213,217,226,0.5)",
              "hourCompare": "#D5D9E2",
              "monthCompare": "rgba(213,217,226,0.12)",
              "weekCompare": "rgba(213,217,226,0.25)"
            },
            "compareColorsLight": {
              "dayCompare": "rgba(11,11,12,0.5)",
              "hourCompare": "#0B0B0C",
              "monthCompare": "rgba(11,11,12,0.12)",
              "weekCompare": "rgba(11,11,12,0.3)"
            },
            "compareTitle": "",
            "compareType": "",
            "currentChartType": "sequence",
            "density": "medium",
            "fixedTime": "",
            "isPercent": false,
            "isTimeInterval": true,
            "legendPostion": "none",
            "legendValues": "",
            "levels": [],
            "onlyShowGroupName": false,
            "openCompare": false,
            "openStack": false,
            "showFieldMapping": false,
            "showLine": false,
            "showTitle": true,
            "stackType": "time",
            "timeInterval": "default",
            "titleDesc": "",
            "units": [],
            "xAxisShowType": "time",
            "yAxixMaxVal": null,
            "yAxixMinVal": null
          }
        },
        "group": {
          "name": "Overview"
        },
        "name": "Pods Running",
        "pos": {
          "h": 9,
          "w": 8,
          "x": 8,
          "y": 24.5
        },
        "queries": [
          {
            "color": "",
            "datasource": "dataflux",
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "",
              "code": "A",
              "dataSource": "kubernetes",
              "field": "pod",
              "fieldFunc": "sum",
              "fieldType": "integer",
              "fill": null,
              "filters": [
                {
                  "id": "41d638b0-bc95-11ec-83c1-559806b3b80f",
                  "logic": "and",
                  "name": "cluster_name_k8s",
                  "op": "=",
                  "type": "",
                  "value": "#{cluster_name_k8s}"
                },
                {
                  "id": "448c30f0-bc95-11ec-83c1-559806b3b80f",
                  "logic": "and",
                  "name": "namespace",
                  "op": "=",
                  "type": "",
                  "value": "#{namespace}"
                }
              ],
              "funcList": [],
              "groupBy": [
                "cluster_name_k8s",
                "namespace"
              ],
              "groupByTime": "",
              "namespace": "metric",
              "q": "SERIES_SUM(\"M::`kubernetes`:(SUM(`pod`)) { `cluster_name_k8s` = '#{cluster_name_k8s}' and `namespace` = '#{namespace}' } BY `cluster_name_k8s`, `namespace`\")",
              "queryFuncs": [
                {
                  "args": [],
                  "name": "series_sum"
                }
              ],
              "type": "simple"
            },
            "type": "sequence",
            "unit": ""
          }
        ],
        "type": "sequence"
      },
      {
        "extend": {
          "fixedTime": "",
          "isRefresh": false,
          "settings": {
            "alias": [],
            "chartType": "areaLine",
            "colors": [],
            "compareColors": {
              "dayCompare": "rgba(11,11,12,0.5)",
              "hourCompare": "#0B0B0C",
              "monthCompare": "rgba(11,11,12,0.12)",
              "weekCompare": "rgba(11,11,12,0.3)"
            },
            "compareColorsDark": {
              "dayCompare": "rgba(213,217,226,0.5)",
              "hourCompare": "#D5D9E2",
              "monthCompare": "rgba(213,217,226,0.12)",
              "weekCompare": "rgba(213,217,226,0.25)"
            },
            "compareColorsLight": {
              "dayCompare": "rgba(11,11,12,0.5)",
              "hourCompare": "#0B0B0C",
              "monthCompare": "rgba(11,11,12,0.12)",
              "weekCompare": "rgba(11,11,12,0.3)"
            },
            "compareTitle": "",
            "compareType": "",
            "currentChartType": "sequence",
            "density": "medium",
            "fixedTime": "",
            "isPercent": false,
            "isTimeInterval": true,
            "legendPostion": "none",
            "legendValues": "",
            "levels": [],
            "onlyShowGroupName": false,
            "openCompare": false,
            "openStack": false,
            "showFieldMapping": false,
            "showLine": false,
            "showTitle": true,
            "stackType": "time",
            "timeInterval": "default",
            "titleDesc": "",
            "units": [],
            "xAxisShowType": "time",
            "yAxixMaxVal": null,
            "yAxixMinVal": null
          }
        },
        "group": {
          "name": "Pods"
        },
        "name": "CPU Usage by Pod",
        "pos": {
          "h": 10,
          "w": 8,
          "x": 8,
          "y": 45
        },
        "queries": [
          {
            "color": "",
            "datasource": "dataflux",
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "",
              "code": "A",
              "dataSource": "kube_pod",
              "field": "cpu_usage",
              "fieldFunc": "avg",
              "fieldType": "float",
              "fill": null,
              "filters": [
                {
                  "id": "c4da2fc0-bca2-11ec-83c1-559806b3b80f",
                  "logic": "and",
                  "name": "cluster_name_k8s",
                  "op": "=",
                  "type": "",
                  "value": "#{cluster_name_k8s}"
                },
                {
                  "id": "c773c660-bca2-11ec-83c1-559806b3b80f",
                  "logic": "and",
                  "name": "namespace",
                  "op": "=",
                  "type": "",
                  "value": "#{namespace}"
                }
              ],
              "funcList": [],
              "groupBy": [
                "cluster_name_k8s",
                "pod"
              ],
              "groupByTime": "",
              "namespace": "metric",
              "q": "M::`kube_pod`:(AVG(`cpu_usage`)) { `cluster_name_k8s` = '#{cluster_name_k8s}' and `namespace` = '#{namespace}' } BY `cluster_name_k8s`, `pod`",
              "queryFuncs": [],
              "type": "simple"
            },
            "type": "sequence",
            "unit": ""
          }
        ],
        "type": "sequence"
      },
      {
        "extend": {
          "fixedTime": "",
          "isRefresh": false,
          "settings": {
            "alias": [],
            "bar": {
              "direction": "horizontal",
              "xAxisShowType": "groupBy"
            },
            "chartType": "bar",
            "color": "",
            "colors": [],
            "currentChartType": "toplist",
            "fixedTime": "",
            "isTimeInterval": false,
            "levels": [],
            "openCompare": false,
            "showFieldMapping": false,
            "showTableHead": true,
            "showTitle": true,
            "showTopSize": true,
            "table": {
              "queryMode": "toGroupColumn"
            },
            "tableSortMetricName": "",
            "tableSortType": "top",
            "timeInterval": "default",
            "titleDesc": "",
            "topSize": 10,
            "units": []
          }
        },
        "group": {
          "name": "Pods"
        },
        "name": "CPU-intensive pods",
        "pos": {
          "h": 19,
          "w": 8,
          "x": 0,
          "y": 45
        },
        "queries": [
          {
            "color": "",
            "datasource": "dataflux",
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "",
              "code": "A",
              "dataSource": "kube_pod",
              "field": "cpu_usage",
              "fieldFunc": "avg",
              "fieldType": "float",
              "fill": "",
              "filters": [
                {
                  "id": "e3aff650-bc9d-11ec-83c1-559806b3b80f",
                  "logic": "and",
                  "name": "cluster_name_k8s",
                  "op": "=",
                  "type": "",
                  "value": "#{cluster_name_k8s}"
                },
                {
                  "id": "28926790-bca2-11ec-83c1-559806b3b80f",
                  "logic": "and",
                  "name": "namespace",
                  "op": "=",
                  "type": "",
                  "value": "#{namespace}"
                }
              ],
              "funcList": [
                "last",
                "top:10"
              ],
              "groupBy": [
                "cluster_name_k8s",
                "namespace",
                "pod"
              ],
              "groupByTime": "",
              "namespace": "metric",
              "q": "M::`kube_pod`:(AVG(`cpu_usage`)) { `cluster_name_k8s` = '#{cluster_name_k8s}' and `namespace` = '#{namespace}' } BY `cluster_name_k8s`, `namespace`, `pod`",
              "queryFuncs": [],
              "type": "simple"
            },
            "type": "toplist",
            "unit": ""
          }
        ],
        "type": "toplist"
      },
      {
        "extend": {
          "fixedTime": "",
          "isRefresh": false,
          "settings": {
            "alias": [],
            "bar": {
              "direction": "horizontal",
              "xAxisShowType": "groupBy"
            },
            "chartType": "bar",
            "color": "",
            "colors": [],
            "currentChartType": "toplist",
            "fixedTime": "",
            "isTimeInterval": false,
            "levels": [],
            "openCompare": false,
            "showFieldMapping": false,
            "showTableHead": true,
            "showTitle": true,
            "showTopSize": true,
            "table": {
              "queryMode": "toGroupColumn"
            },
            "tableSortMetricName": "",
            "tableSortType": "top",
            "timeInterval": "default",
            "titleDesc": "",
            "topSize": 10,
            "units": []
          }
        },
        "group": {
          "name": "Pods"
        },
        "name": "Memory-intensive pods",
        "pos": {
          "h": 19,
          "w": 8,
          "x": 16,
          "y": 45
        },
        "queries": [
          {
            "color": "",
            "datasource": "dataflux",
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "",
              "code": "A",
              "dataSource": "kube_pod",
              "field": "memory_usage_bytes",
              "fieldFunc": "avg",
              "fieldType": "integer",
              "fill": null,
              "filters": [
                {
                  "id": "d47d5470-bca2-11ec-83c1-559806b3b80f",
                  "logic": "and",
                  "name": "cluster_name_k8s",
                  "op": "=",
                  "type": "",
                  "value": "#{cluster_name_k8s}"
                },
                {
                  "id": "d7c63de0-bca2-11ec-83c1-559806b3b80f",
                  "logic": "and",
                  "name": "namespace",
                  "op": "=",
                  "type": "",
                  "value": "#{namespace}"
                }
              ],
              "funcList": [
                "last",
                "top:10"
              ],
              "groupBy": [
                "cluster_name_k8s",
                "namespace",
                "pod"
              ],
              "groupByTime": "",
              "namespace": "metric",
              "q": "M::`kube_pod`:(AVG(`memory_usage_bytes`)) { `cluster_name_k8s` = '#{cluster_name_k8s}' and `namespace` = '#{namespace}' } BY `cluster_name_k8s`, `namespace`, `pod`",
              "queryFuncs": [],
              "type": "simple"
            },
            "type": "toplist",
            "unit": ""
          }
        ],
        "type": "toplist"
      },
      {
        "extend": {
          "fixedTime": "",
          "isRefresh": false,
          "settings": {
            "alias": [],
            "chartType": "areaLine",
            "colors": [],
            "compareColors": {
              "dayCompare": "rgba(11,11,12,0.5)",
              "hourCompare": "#0B0B0C",
              "monthCompare": "rgba(11,11,12,0.12)",
              "weekCompare": "rgba(11,11,12,0.3)"
            },
            "compareColorsDark": {
              "dayCompare": "rgba(213,217,226,0.5)",
              "hourCompare": "#D5D9E2",
              "monthCompare": "rgba(213,217,226,0.12)",
              "weekCompare": "rgba(213,217,226,0.25)"
            },
            "compareColorsLight": {
              "dayCompare": "rgba(11,11,12,0.5)",
              "hourCompare": "#0B0B0C",
              "monthCompare": "rgba(11,11,12,0.12)",
              "weekCompare": "rgba(11,11,12,0.3)"
            },
            "compareTitle": "",
            "compareType": "",
            "currentChartType": "sequence",
            "density": "medium",
            "fixedTime": "",
            "isPercent": false,
            "isTimeInterval": true,
            "legendPostion": "none",
            "legendValues": "",
            "levels": [],
            "onlyShowGroupName": false,
            "openCompare": false,
            "openStack": false,
            "showFieldMapping": false,
            "showLine": false,
            "showTitle": true,
            "stackType": "time",
            "timeInterval": "default",
            "titleDesc": "",
            "units": [],
            "xAxisShowType": "time",
            "yAxixMaxVal": null,
            "yAxixMinVal": null
          }
        },
        "group": {
          "name": "Pods"
        },
        "name": "Memory Usage by Pod",
        "pos": {
          "h": 9,
          "w": 8,
          "x": 8,
          "y": 55
        },
        "queries": [
          {
            "color": "",
            "datasource": "dataflux",
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "",
              "code": "A",
              "dataSource": "kube_pod",
              "field": "memory_usage_bytes",
              "fieldFunc": "avg",
              "fieldType": "integer",
              "fill": null,
              "filters": [
                {
                  "id": "383fd440-e7ca-11ec-a28f-5d05bd55e058",
                  "logic": "and",
                  "name": "cluster_name_k8s",
                  "op": "=",
                  "type": "",
                  "value": "#{cluster_name_k8s}"
                },
                {
                  "id": "3c7e4140-e7ca-11ec-a28f-5d05bd55e058",
                  "logic": "and",
                  "name": "namespace",
                  "op": "=",
                  "type": "",
                  "value": "#{namespace}"
                }
              ],
              "funcList": [],
              "groupBy": [
                "cluster_name_k8s",
                "pod"
              ],
              "groupByTime": "",
              "namespace": "metric",
              "q": "M::`kube_pod`:(AVG(`memory_usage_bytes`)) { `cluster_name_k8s` = '#{cluster_name_k8s}' and `namespace` = '#{namespace}' } BY `cluster_name_k8s`, `pod`",
              "queryFuncs": [],
              "type": "simple"
            },
            "type": "sequence",
            "unit": ""
          }
        ],
        "type": "sequence"
      },
      {
        "extend": {
          "fixedTime": "",
          "settings": {
            "bar": {
              "direction": "horizontal",
              "xAxisShowType": "groupBy"
            },
            "chartType": "bar",
            "color": "",
            "colors": [],
            "currentChartType": "toplist",
            "fixedTime": "",
            "isTimeInterval": false,
            "levels": [],
            "openCompare": false,
            "showFieldMapping": false,
            "showTableHead": true,
            "showTitle": true,
            "showTopSize": true,
            "table": {
              "queryMode": "toGroupColumn"
            },
            "tableSortMetricName": "",
            "tableSortType": "top",
            "timeInterval": "default",
            "titleDesc": "",
            "topSize": 10,
            "units": []
          }
        },
        "group": {
          "name": "Overview"
        },
        "name": "Pods running by Namespace",
        "pos": {
          "h": 18,
          "w": 8,
          "x": 0,
          "y": 24.5
        },
        "queries": [
          {
            "color": "",
            "datasource": "dataflux",
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "",
              "code": "A",
              "dataSource": "kubelet_pod",
              "field": "pod_name",
              "fieldFunc": "count_distinct",
              "fieldType": "keyword",
              "fill": "",
              "filters": [
                {
                  "id": "351a4380-bc97-11ec-83c1-559806b3b80f",
                  "logic": "and",
                  "name": "cluster_name_k8s",
                  "op": "=",
                  "type": "keyword",
                  "value": "#{cluster_name_k8s}"
                }
              ],
              "funcList": [
                "last",
                "top:10"
              ],
              "groupBy": [
                "cluster_name_k8s",
                "namespace"
              ],
              "groupByTime": "",
              "namespace": "object",
              "q": "O::`kubelet_pod`:(COUNT_DISTINCT(`pod_name`)) { `cluster_name_k8s` = '#{cluster_name_k8s}' } BY `cluster_name_k8s`, `namespace`",
              "queryFuncs": [],
              "type": "simple"
            },
            "type": "toplist",
            "unit": ""
          }
        ],
        "type": "toplist"
      },
      {
        "extend": {
          "fixedTime": "",
          "isRefresh": false,
          "settings": {
            "alias": [],
            "chartType": "areaLine",
            "colors": [],
            "compareColors": {
              "dayCompare": "rgba(11,11,12,0.5)",
              "hourCompare": "#0B0B0C",
              "monthCompare": "rgba(11,11,12,0.12)",
              "weekCompare": "rgba(11,11,12,0.3)"
            },
            "compareColorsDark": {
              "dayCompare": "rgba(213,217,226,0.5)",
              "hourCompare": "#D5D9E2",
              "monthCompare": "rgba(213,217,226,0.12)",
              "weekCompare": "rgba(213,217,226,0.25)"
            },
            "compareColorsLight": {
              "dayCompare": "rgba(11,11,12,0.5)",
              "hourCompare": "#0B0B0C",
              "monthCompare": "rgba(11,11,12,0.12)",
              "weekCompare": "rgba(11,11,12,0.3)"
            },
            "compareTitle": "",
            "compareType": "",
            "currentChartType": "sequence",
            "density": "medium",
            "fixedTime": "",
            "isPercent": false,
            "isTimeInterval": true,
            "legendPostion": "none",
            "legendValues": "",
            "levels": [],
            "onlyShowGroupName": false,
            "openCompare": false,
            "openStack": false,
            "showFieldMapping": false,
            "showLine": false,
            "showTitle": true,
            "stackType": "time",
            "timeInterval": "default",
            "titleDesc": "",
            "units": [],
            "xAxisShowType": "time",
            "yAxixMaxVal": null,
            "yAxixMinVal": null
          }
        },
        "group": {
          "name": "Containers"
        },
        "name": "CPU Usage by Container",
        "pos": {
          "h": 12,
          "w": 12,
          "x": 0,
          "y": 66.5
        },
        "queries": [
          {
            "color": "",
            "datasource": "dataflux",
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "",
              "code": "A",
              "dataSource": "docker_containers",
              "field": "cpu_usage",
              "fieldFunc": "avg",
              "fieldType": "float",
              "fill": null,
              "filters": [
                {
                  "id": "7529cc60-bebe-11ec-adfb-69771eaf4704",
                  "logic": "and",
                  "name": "cluster_name_k8s",
                  "op": "=",
                  "type": "",
                  "value": "#{cluster_name_k8s}"
                },
                {
                  "id": "58821d00-b1c1-11ed-83c2-37f9ecc6a62c",
                  "logic": "and",
                  "name": "namespace",
                  "op": "=",
                  "type": "",
                  "value": "#{namespace}"
                }
              ],
              "funcList": [],
              "groupBy": [
                "cluster_name_k8s",
                "container_name"
              ],
              "groupByTime": "",
              "namespace": "metric",
              "q": "M::`docker_containers`:(AVG(`cpu_usage`)) { `cluster_name_k8s` = '#{cluster_name_k8s}' and `namespace` = '#{namespace}' } BY `cluster_name_k8s`, `container_name`",
              "queryFuncs": [],
              "type": "simple"
            },
            "type": "sequence",
            "unit": ""
          }
        ],
        "type": "sequence"
      },
      {
        "extend": {
          "fixedTime": "",
          "isRefresh": false,
          "settings": {
            "alias": [],
            "chartType": "areaLine",
            "colors": [],
            "compareColors": {
              "dayCompare": "rgba(11,11,12,0.5)",
              "hourCompare": "#0B0B0C",
              "monthCompare": "rgba(11,11,12,0.12)",
              "weekCompare": "rgba(11,11,12,0.3)"
            },
            "compareColorsDark": {
              "dayCompare": "rgba(213,217,226,0.5)",
              "hourCompare": "#D5D9E2",
              "monthCompare": "rgba(213,217,226,0.12)",
              "weekCompare": "rgba(213,217,226,0.25)"
            },
            "compareColorsLight": {
              "dayCompare": "rgba(11,11,12,0.5)",
              "hourCompare": "#0B0B0C",
              "monthCompare": "rgba(11,11,12,0.12)",
              "weekCompare": "rgba(11,11,12,0.3)"
            },
            "compareTitle": "",
            "compareType": "",
            "currentChartType": "sequence",
            "density": "medium",
            "fixedTime": "",
            "isPercent": false,
            "isTimeInterval": true,
            "legendPostion": "none",
            "legendValues": "",
            "levels": [],
            "onlyShowGroupName": false,
            "openCompare": false,
            "openStack": false,
            "showFieldMapping": false,
            "showLine": false,
            "showTitle": true,
            "stackType": "time",
            "timeInterval": "default",
            "titleDesc": "",
            "units": [],
            "xAxisShowType": "time",
            "yAxixMaxVal": null,
            "yAxixMinVal": null
          }
        },
        "group": {
          "name": "Containers"
        },
        "name": "Memory Usage by Container",
        "pos": {
          "h": 12,
          "w": 12,
          "x": 0,
          "y": 78.5
        },
        "queries": [
          {
            "color": "",
            "datasource": "dataflux",
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "",
              "code": "A",
              "dataSource": "docker_containers",
              "field": "mem_usage",
              "fieldFunc": "avg",
              "fieldType": "integer",
              "fill": null,
              "filters": [
                {
                  "id": "c31500c0-bebe-11ec-adfb-69771eaf4704",
                  "logic": "and",
                  "name": "cluster_name_k8s",
                  "op": "=",
                  "type": "",
                  "value": "#{cluster_name_k8s}"
                },
                {
                  "id": "a28b3530-b1c1-11ed-83c2-37f9ecc6a62c",
                  "logic": "and",
                  "name": "namespace",
                  "op": "=",
                  "type": "",
                  "value": "#{namespace}"
                }
              ],
              "funcList": [],
              "groupBy": [
                "cluster_name_k8s",
                "container_name"
              ],
              "groupByTime": "",
              "namespace": "metric",
              "q": "M::`docker_containers`:(AVG(`mem_usage`)) { `cluster_name_k8s` = '#{cluster_name_k8s}' and `namespace` = '#{namespace}' } BY `cluster_name_k8s`, `container_name`",
              "queryFuncs": [],
              "type": "simple"
            },
            "type": "sequence",
            "unit": ""
          }
        ],
        "type": "sequence"
      },
      {
        "extend": {
          "fixedTime": "",
          "isRefresh": false,
          "settings": {
            "alias": [],
            "bar": {
              "direction": "horizontal",
              "xAxisShowType": "groupBy"
            },
            "chartType": "bar",
            "color": "",
            "colors": [],
            "currentChartType": "toplist",
            "fixedTime": "",
            "isTimeInterval": false,
            "levels": [],
            "openCompare": false,
            "showFieldMapping": false,
            "showTableHead": true,
            "showTitle": true,
            "showTopSize": true,
            "table": {
              "queryMode": "toGroupColumn"
            },
            "tableSortMetricName": "",
            "tableSortType": "top",
            "timeInterval": "default",
            "titleDesc": "",
            "topSize": 10,
            "units": []
          }
        },
        "group": {
          "name": "Containers"
        },
        "name": "CPU Usage",
        "pos": {
          "h": 24,
          "w": 6,
          "x": 12,
          "y": 66.5
        },
        "queries": [
          {
            "color": "",
            "datasource": "dataflux",
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "",
              "code": "A",
              "dataSource": "docker_containers",
              "field": "cpu_usage",
              "fieldFunc": "avg",
              "fieldType": "float",
              "fill": null,
              "fillNum": null,
              "filters": [
                {
                  "id": "e672e8b0-bed3-11ec-adfb-69771eaf4704",
                  "logic": "and",
                  "name": "cluster_name_k8s",
                  "op": "=",
                  "type": "",
                  "value": "#{cluster_name_k8s}"
                }
              ],
              "funcList": [
                "last",
                "top:10"
              ],
              "groupBy": [
                "cluster_name_k8s",
                "container_name"
              ],
              "groupByTime": "",
              "namespace": "metric",
              "q": "M::`docker_containers`:(AVG(`cpu_usage`)) { `cluster_name_k8s` = '#{cluster_name_k8s}' } BY `cluster_name_k8s`, `container_name`",
              "queryFuncs": [],
              "type": "simple",
              "withLabels": []
            },
            "type": "toplist",
            "unit": ""
          }
        ],
        "type": "toplist"
      },
      {
        "extend": {
          "fixedTime": "",
          "isRefresh": false,
          "settings": {
            "alias": [],
            "bar": {
              "direction": "horizontal",
              "xAxisShowType": "groupBy"
            },
            "chartType": "bar",
            "color": "",
            "colors": [],
            "currentChartType": "toplist",
            "fixedTime": "",
            "isTimeInterval": false,
            "levels": [],
            "openCompare": false,
            "showFieldMapping": false,
            "showTableHead": true,
            "showTitle": true,
            "showTopSize": true,
            "table": {
              "queryMode": "toGroupColumn"
            },
            "tableSortMetricName": "",
            "tableSortType": "top",
            "timeInterval": "default",
            "titleDesc": "",
            "topSize": 10,
            "units": []
          }
        },
        "group": {
          "name": "Containers"
        },
        "name": "Memory Usage",
        "pos": {
          "h": 24,
          "w": 6,
          "x": 18,
          "y": 66.5
        },
        "queries": [
          {
            "color": "",
            "datasource": "dataflux",
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "",
              "code": "A",
              "dataSource": "docker_containers",
              "field": "mem_usage",
              "fieldFunc": "avg",
              "fieldType": "integer",
              "fill": null,
              "fillNum": null,
              "filters": [
                {
                  "id": "8cc37e60-b1c1-11ed-83c2-37f9ecc6a62c",
                  "logic": "and",
                  "name": "cluster_name_k8s",
                  "op": "=",
                  "value": "#{cluster_name_k8s}"
                }
              ],
              "funcList": [
                "last",
                "top:10"
              ],
              "groupBy": [
                "cluster_name_k8s",
                "container_name"
              ],
              "groupByTime": "",
              "namespace": "metric",
              "q": "M::`docker_containers`:(AVG(`mem_usage`)) { `cluster_name_k8s` = '#{cluster_name_k8s}' } BY `cluster_name_k8s`, `container_name`",
              "queryFuncs": [],
              "type": "simple",
              "withLabels": []
            },
            "type": "toplist",
            "unit": ""
          }
        ],
        "type": "toplist"
      },
      {
        "extend": {
          "fixedTime": "",
          "isRefresh": false,
          "settings": {
            "alias": [],
            "bar": {
              "direction": "horizontal",
              "xAxisShowType": "groupBy"
            },
            "chartType": "bar",
            "color": "#498BFE",
            "colors": [
              {
                "color": "#498BFE",
                "key": "avg(restarts){\"namespace\": \"kube-system\", \"pod_name\": \"calico-node-8lzt5\"}",
                "name": "avg(restarts){\"namespace\": \"kube-system\", \"pod_name\": \"calico-node-8lzt5\"}"
              }
            ],
            "currentChartType": "toplist",
            "fixedTime": "",
            "isTimeInterval": false,
            "levels": [],
            "openCompare": false,
            "showFieldMapping": false,
            "showTableHead": true,
            "showTitle": true,
            "showTopSize": true,
            "table": {
              "queryMode": "toGroupColumn"
            },
            "tableSortMetricName": "",
            "tableSortType": "top",
            "timeInterval": "default",
            "titleDesc": "",
            "topSize": 10,
            "units": []
          }
        },
        "group": {
          "name": "Overview"
        },
        "name": "Pods restart",
        "pos": {
          "h": 18,
          "w": 8,
          "x": 16,
          "y": 24.5
        },
        "queries": [
          {
            "color": "",
            "datasource": "dataflux",
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "",
              "code": "A",
              "dataSource": "kubelet_pod",
              "field": "restarts",
              "fieldFunc": "avg",
              "fieldType": "long",
              "fill": null,
              "fillNum": null,
              "filters": [
                {
                  "id": "e992ae80-b1b3-11ed-83c2-37f9ecc6a62c",
                  "logic": "and",
                  "name": "cluster_name_k8s",
                  "op": "=",
                  "value": "#{cluster_name_k8s}"
                },
                {
                  "id": "e992ae81-b1b3-11ed-83c2-37f9ecc6a62c",
                  "logic": "and",
                  "name": "namespace",
                  "op": "=",
                  "value": "#{namespace}"
                }
              ],
              "funcList": [
                "last",
                "top:10"
              ],
              "groupBy": [
                "cluster_name_k8s",
                "namespace",
                "pod_name"
              ],
              "groupByTime": "",
              "namespace": "object",
              "q": "O::`kubelet_pod`:(AVG(`restarts`)) { `cluster_name_k8s` = '#{cluster_name_k8s}' and `namespace` = '#{namespace}' } BY `cluster_name_k8s`, `namespace`, `pod_name`",
              "queryFuncs": [],
              "type": "simple",
              "withLabels": []
            },
            "type": "toplist",
            "unit": ""
          }
        ],
        "type": "toplist"
      },
      {
        "extend": {
          "fixedTime": "",
          "isRefresh": false,
          "settings": {
            "alias": [],
            "chartType": "areaLine",
            "colors": [
              {
                "color": "#5F67D6",
                "key": "",
                "name": ""
              }
            ],
            "compareColors": {
              "dayCompare": "rgba(11,11,12,0.5)",
              "hourCompare": "#0B0B0C",
              "monthCompare": "rgba(11,11,12,0.12)",
              "weekCompare": "rgba(11,11,12,0.3)"
            },
            "compareColorsDark": {
              "dayCompare": "rgba(213,217,226,0.5)",
              "hourCompare": "#D5D9E2",
              "monthCompare": "rgba(213,217,226,0.12)",
              "weekCompare": "rgba(213,217,226,0.25)"
            },
            "compareColorsLight": {
              "dayCompare": "rgba(11,11,12,0.5)",
              "hourCompare": "#0B0B0C",
              "monthCompare": "rgba(11,11,12,0.12)",
              "weekCompare": "rgba(11,11,12,0.3)"
            },
            "compareTitle": "",
            "compareType": "",
            "currentChartType": "sequence",
            "density": "medium",
            "fixedTime": "",
            "isPercent": false,
            "isTimeInterval": true,
            "legendPostion": "none",
            "legendValues": "",
            "levels": [],
            "onlyShowGroupName": false,
            "openCompare": false,
            "openStack": false,
            "showFieldMapping": false,
            "showLine": false,
            "showTitle": true,
            "stackType": "time",
            "timeInterval": "default",
            "titleDesc": "",
            "units": [],
            "xAxisShowType": "time",
            "yAxixMaxVal": null,
            "yAxixMinVal": null
          }
        },
        "group": {
          "name": "Overview"
        },
        "name": "Pods ready",
        "pos": {
          "h": 9,
          "w": 8,
          "x": 8,
          "y": 33.5
        },
        "queries": [
          {
            "color": "",
            "datasource": "dataflux",
            "disabled": false,
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "",
              "code": "A",
              "dataSource": "kube_pod",
              "field": "ready",
              "fieldFunc": "sum",
              "fieldType": "integer",
              "fill": null,
              "fillNum": null,
              "filters": [
                {
                  "id": "3f060d90-b1bd-11ed-83c2-37f9ecc6a62c",
                  "logic": "and",
                  "name": "cluster_name_k8s",
                  "op": "=",
                  "value": "#{cluster_name_k8s}"
                },
                {
                  "id": "3f060d91-b1bd-11ed-83c2-37f9ecc6a62c",
                  "logic": "and",
                  "name": "namespace",
                  "op": "=",
                  "value": "#{namespace}"
                }
              ],
              "funcList": [],
              "groupBy": [
                "cluster_name_k8s",
                "namespace"
              ],
              "groupByTime": "",
              "namespace": "metric",
              "q": "SERIES_SUM(\"M::`kube_pod`:(SUM(`ready`)) { `cluster_name_k8s` = '#{cluster_name_k8s}' and `namespace` = '#{namespace}' } BY `cluster_name_k8s`, `namespace`\")",
              "queryFuncs": [
                {
                  "args": [],
                  "name": "series_sum"
                }
              ],
              "type": "simple",
              "withLabels": []
            },
            "type": "sequence",
            "unit": ""
          }
        ],
        "type": "sequence"
      }
    ],
    "groups": [
      "Overview",
      "Pods",
      "Containers"
    ],
    "type": "template",
    "vars": [
      {
        "code": "cluster_name_k8s",
        "datasource": "dataflux",
        "definition": {
          "defaultVal": {
            "label": "*",
            "value": "re(`.*`)"
          },
          "field": "",
          "metric": "",
          "object": "",
          "tag": "",
          "value": "show_tag_value(from=['kubernetes'], keyin=['cluster_name_k8s'])[5m]"
        },
        "hide": 0,
        "isHiddenAsterisk": 0,
        "name": "集群名称",
        "seq": 0,
        "type": "QUERY",
        "valueSort": "default"
      },
      {
        "code": "namespace",
        "datasource": "dataflux",
        "definition": {
          "defaultVal": {
            "label": "*",
            "value": "re(`.*`)"
          },
          "field": "",
          "metric": "",
          "object": "",
          "tag": "",
          "value": "show_tag_value(from=['kubernetes'], keyin=['namespace']){cluster_name_k8s='#{cluster_name_k8s}'}[5m]"
        },
        "hide": 0,
        "isHiddenAsterisk": 0,
        "name": "命名空间",
        "seq": 1,
        "type": "QUERY",
        "valueSort": "default"
      }
    ]
  },
  "summary": "",
  "tagInfo": [
    {
      "id": "tag_53200e186c134e2bbd8354aa465dc910",
      "name": "Pods"
    },
    {
      "id": "tag_119cea09081e4bd3b678aae20c77ed34",
      "name": "kubernetes"
    }
  ],
  "tags": [],
  "thumbnail": "",
  "title": "Kubernetes Overview by Pods 监控视图"
}
